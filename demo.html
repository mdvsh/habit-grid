<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monthly Tracker - Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Mono', 'Menlo', 'Monaco', monospace;
            background-color: #e8e0d0;
            color: #2d2a26;
            min-height: 100vh;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            background: #f5f0e1;
            min-height: 100vh;
            background-image: 
                linear-gradient(rgba(139, 119, 92, 0.03) 1px, transparent 1px);
            background-size: 100% 24px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            border-bottom: 2px solid #8b775c;
            background: linear-gradient(to bottom, #f5f0e1, #f0e9d8);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: baseline;
            gap: 24px;
        }

        .month-title {
            font-size: 22px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: #3d3428;
            border-bottom: 3px solid #c9a86c;
            padding-bottom: 2px;
        }

        .monthly-theme {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #666;
        }

        .monthly-theme input {
            border: none;
            border-bottom: 1px solid #ccc;
            background: transparent;
            font-family: inherit;
            font-size: 12px;
            font-weight: 500;
            width: 160px;
            padding: 2px 0;
            color: #2d2a26;
        }

        .monthly-theme input:focus {
            outline: none;
            border-bottom-color: #2d2a26;
        }

        .motto {
            font-size: 11px;
            color: #999;
            font-style: italic;
        }

        .nav-buttons {
            display: flex;
            gap: 6px;
        }

        .nav-btn {
            background: transparent;
            border: 1px solid #8b775c;
            padding: 6px 12px;
            cursor: pointer;
            font-family: inherit;
            font-size: 11px;
            border-radius: 3px;
            transition: all 0.15s;
            color: #5c5347;
            font-weight: 600;
        }

        .nav-btn:hover {
            background: #5c5347;
            color: #f5f0e1;
            border-color: #5c5347;
        }

        .nav-btn.export {
            color: #1e5f8a;
            border-color: #1e5f8a;
        }

        .nav-btn.export:hover {
            background: #1e5f8a;
            color: #fff;
        }

        .main-content {
            display: grid;
            grid-template-columns: 280px 1fr 140px;
            min-height: calc(100vh - 60px);
        }

        /* Left - Memorable Moments */
        .moments-section {
            border-right: 2px solid #8b775c;
            padding: 12px;
            background: #f0e9d8;
            overflow-y: auto;
        }

        .moments-title {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #8b775c;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #c9a86c;
            font-weight: 700;
        }

        .moment-row {
            display: flex;
            gap: 6px;
            padding: 4px 0;
            border-bottom: 1px solid #e0d7c6;
            align-items: flex-start;
        }

        .moment-row.sunday {
            border-bottom: 2px solid #8b775c;
        }

        .moment-day {
            font-size: 10px;
            font-weight: 700;
            color: #8b775c;
            min-width: 18px;
        }

        .moment-input {
            flex: 1;
            border: none;
            background: transparent;
            font-family: inherit;
            font-size: 10px;
            padding: 2px 0;
            line-height: 1.4;
        }

        .moment-input:focus {
            outline: none;
            background: #fff;
        }

        /* Center - Habit Grid */
        .grid-section {
            overflow-x: auto;
            padding: 12px;
        }

        .habit-grid {
            border-collapse: collapse;
            font-size: 10px;
            width: 100%;
        }

        .habit-grid th,
        .habit-grid td {
            border: 1px solid #d4cbb8;
            text-align: center;
            padding: 0;
        }

        .habit-grid th {
            background: #e8e0d0;
            font-weight: 700;
            font-size: 9px;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transform: rotate(180deg);
            height: 75px;
            padding: 6px 3px;
            white-space: nowrap;
            letter-spacing: 0.5px;
            color: #4a4235;
            border-bottom: 2px solid #8b775c;
        }

        .habit-grid th.day-col {
            writing-mode: horizontal-tb;
            transform: none;
            height: auto;
            width: 24px;
            font-weight: 700;
            font-size: 10px;
            color: #3d3428;
        }

        .habit-grid th.quant-col {
            color: #1e5f8a;
            font-weight: 800;
        }

        .habit-grid th.avoid-col {
            color: #b83232;
            font-weight: 800;
        }

        .habit-grid th.score-col {
            writing-mode: horizontal-tb;
            transform: none;
            height: auto;
            width: 28px;
            font-weight: 700;
            color: #3d3428;
        }

        .habit-grid td {
            width: 24px;
            height: 24px;
            cursor: pointer;
            transition: background 0.1s;
        }

        .habit-grid td:hover {
            background: #e8e0d0;
        }

        .habit-grid td.day-cell {
            background: #e8e0d0;
            font-weight: 700;
            font-size: 10px;
            cursor: default;
            color: #5c5347;
        }

        .habit-grid td.checked {
            font-weight: 800;
            font-size: 14px;
        }

        .habit-grid td.positive.checked {
            color: #2d2a26;
            background: rgba(201, 168, 108, 0.15);
        }

        .habit-grid td.avoid.checked {
            color: #b83232;
            background: rgba(184, 50, 50, 0.08);
        }

        .habit-grid td.quant-cell {
            padding: 0;
            font-size: 9px;
            color: #1e5f8a;
        }

        .habit-grid td.score-cell {
            background: #e8e0d0;
            font-weight: 700;
            font-size: 10px;
            cursor: default;
            color: #3d3428;
        }

        .habit-grid tr.sunday-row td {
            border-bottom: 2px solid #8b775c;
        }

        /* Right - Score Graph */
        .graph-section {
            border-left: 2px solid #8b775c;
            padding: 12px 8px;
            background: #f0e9d8;
            display: flex;
            flex-direction: column;
        }

        .graph-title {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #8b775c;
            text-align: center;
            margin-bottom: 6px;
            font-weight: 700;
        }

        .graph-scale {
            display: flex;
            justify-content: space-between;
            font-size: 8px;
            color: #a0927c;
            padding: 0 4px;
            margin-bottom: 4px;
            font-weight: 600;
        }

        .graph-container {
            flex: 1;
            position: relative;
        }

        .graph-row {
            display: flex;
            align-items: center;
            height: 24px;
            border-bottom: 1px solid #e0d7c6;
        }

        .graph-row.sunday {
            border-bottom: 2px solid #8b775c;
        }

        .graph-dots {
            flex: 1;
            position: relative;
            height: 100%;
        }

        .graph-dot {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #3d3428;
            border-radius: 50%;
            top: 50%;
            transform: translateY(-50%);
            box-shadow: 0 0 0 1px rgba(201, 168, 108, 0.4);
        }

        .graph-canvas-wrap {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }

        .graph-canvas {
            width: 100%;
            height: 100%;
        }

        /* Bottom Panel */
        .bottom-panel {
            display: grid;
            grid-template-columns: 280px 1fr 140px;
            border-top: 2px solid #8b775c;
            background: #e8e0d0;
        }

        .panel-section {
            padding: 14px;
            font-size: 10px;
        }

        .panel-section:not(:last-child) {
            border-right: 1px solid #c9b99a;
        }

        .panel-title {
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: #8b775c;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .goals-list {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .goal-row {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            border-bottom: 1px dotted #c9b99a;
        }

        .goal-progress {
            font-weight: 700;
            color: #5c5347;
        }

        .goal-progress.complete {
            color: #4a7c4e;
        }

        .finance-list {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .finance-row {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 6px;
            background: #f5f0e1;
            border: 1px solid #d4cbb8;
        }

        .finance-label {
            font-weight: 700;
            min-width: 45px;
            color: #5c5347;
        }

        .finance-amount {
            font-weight: 600;
            color: #3d3428;
            min-width: 50px;
        }

        .finance-note {
            flex: 1;
            font-size: 9px;
            color: #7a7062;
            font-style: italic;
        }

        .finance-total {
            font-weight: 700;
            background: #d4cbb8;
            padding: 5px 8px;
            margin-top: 6px;
            display: flex;
            justify-content: space-between;
            color: #3d3428;
        }

        .stats-grid {
            display: grid;
            gap: 6px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 3px 0;
            border-bottom: 1px dotted #c9b99a;
        }

        .stat-value {
            font-weight: 700;
            color: #3d3428;
        }

        .legend {
            font-size: 9px;
            color: #8b775c;
            padding: 10px 24px;
            background: #e0d7c6;
            border-top: 1px solid #c9b99a;
            font-weight: 500;
        }

        .legend span {
            margin-right: 20px;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .moments-section,
            .graph-section {
                display: none;
            }

            .bottom-panel {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-left">
                <h1 class="month-title">JANUARY 2025</h1>
                <div class="monthly-theme">
                    <span>focus:</span>
                    <input type="text" value="deep work" readonly>
                </div>
                <div class="motto">keep showing up.</div>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn">←</button>
                <button class="nav-btn">Today</button>
                <button class="nav-btn">→</button>
                <button class="nav-btn export">Export</button>
                <button class="nav-btn export">Import</button>
            </div>
        </div>

        <div class="main-content">
            <div class="moments-section">
                <div class="moments-title">Memorable Moments</div>
                <div id="momentsList"></div>
            </div>

            <div class="grid-section">
                <table class="habit-grid" id="habitGrid"></table>
            </div>

            <div class="graph-section">
                <div class="graph-title">Score</div>
                <div class="graph-scale">
                    <span>-5</span>
                    <span>0</span>
                    <span>5</span>
                    <span>10+</span>
                </div>
                <div class="graph-container" id="graphContainer"></div>
            </div>
        </div>

        <div class="bottom-panel">
            <div class="panel-section">
                <div class="panel-title">Periodic Goals</div>
                <div class="goals-list">
                    <div class="goal-row">
                        <span>Exercise (week)</span>
                        <span class="goal-progress complete">5/5</span>
                    </div>
                    <div class="goal-row">
                        <span>Reading (week)</span>
                        <span class="goal-progress complete">6/5</span>
                    </div>
                    <div class="goal-row">
                        <span>Learning (week)</span>
                        <span class="goal-progress">2/3</span>
                    </div>
                    <div class="goal-row">
                        <span>Create (2 weeks)</span>
                        <span class="goal-progress complete">1/1</span>
                    </div>
                </div>
            </div>

            <div class="panel-section">
                <div class="panel-title">Weekly Finance</div>
                <div class="finance-list">
                    <div class="finance-row">
                        <span class="finance-label">Wk 1</span>
                        <span class="finance-amount">$340</span>
                        <span class="finance-note">groceries, coffee, books</span>
                    </div>
                    <div class="finance-row">
                        <span class="finance-label">Wk 2</span>
                        <span class="finance-amount">$285</span>
                        <span class="finance-note">dinner out, gym supplies</span>
                    </div>
                    <div class="finance-row">
                        <span class="finance-label">Wk 3</span>
                        <span class="finance-amount">$412</span>
                        <span class="finance-note">new headphones, groceries</span>
                    </div>
                    <div class="finance-row">
                        <span class="finance-label">Wk 4</span>
                        <span class="finance-amount">$198</span>
                        <span class="finance-note">minimal week, stayed in</span>
                    </div>
                    <div class="finance-total">
                        <span>Total</span>
                        <span>$1,235</span>
                    </div>
                </div>
            </div>

            <div class="panel-section">
                <div class="panel-title">Month Stats</div>
                <div class="stats-grid">
                    <div class="stat-row">
                        <span>Avg Score</span>
                        <span class="stat-value">5.8</span>
                    </div>
                    <div class="stat-row">
                        <span>Avg Sleep</span>
                        <span class="stat-value">7.2h</span>
                    </div>
                    <div class="stat-row">
                        <span>Avg Weight</span>
                        <span class="stat-value">73.4</span>
                    </div>
                    <div class="stat-row">
                        <span>Days tracked</span>
                        <span class="stat-value">26</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="legend">
            <span>× black = completed</span>
            <span>× red = slipped (−1)</span>
            <span>Score = positives − slips</span>
        </div>
    </div>

    <script>
        const CONFIG = {
            habits: {
                positive: ['Exercise', 'Read', 'Cook', 'Sleep 7+', 'Meditate', 'Learn', 'Create', 'Connect'],
                avoid: ['Scroll', 'Junk', 'Late']
            },
            quantitative: [
                { name: 'Sleep', key: 'sleep' },
                { name: 'Weight', key: 'weight' }
            ]
        };

        // Seeded demo data - looks realistic with variation
        const DEMO_DATA = {
            1: { pos: [1,1,1,1,0,1,0,1], neg: [0,0,0], quant: [7.5, 74.2], summary: "Started year strong. Morning run, caught up w/ old roommate" },
            2: { pos: [1,1,0,1,1,0,0,0], neg: [1,0,0], quant: [7.0, 74.0], summary: "Slow day. Got sucked into twitter rabbit hole" },
            3: { pos: [0,1,1,1,0,1,1,0], neg: [0,0,0], quant: [8.0, 73.8], summary: "Finally shipped that side project feature" },
            4: { pos: [1,1,1,0,0,0,0,1], neg: [0,1,0], quant: [6.5, 73.9], summary: "Bad sleep. Pizza for dinner, no regrets" },
            5: { pos: [1,1,0,1,1,1,0,0], neg: [0,0,0], quant: [7.5, 73.6], summary: "Great focus session. 3hr deep work block" },
            6: { pos: [1,1,1,1,0,0,0,1], neg: [0,0,0], quant: [7.2, 73.5], summary: "Coffee w/ mentor. Good career advice" },
            7: { pos: [0,1,1,1,1,0,0,0], neg: [1,0,0], quant: [7.8, 73.4], summary: "Rest day. Long walk, audiobook, recharge" },
            8: { pos: [1,1,0,1,0,1,0,1], neg: [0,0,0], quant: [7.0, 73.3], summary: "Back to grind. Tackled that gnarly bug" },
            9: { pos: [1,1,1,0,0,1,1,0], neg: [0,0,1], quant: [5.5, 73.5], summary: "Stayed up too late coding. Worth it tho" },
            10: { pos: [0,1,1,1,1,0,0,0], neg: [0,0,0], quant: [8.5, 73.2], summary: "Recovery sleep. Meditation really helped" },
            11: { pos: [1,1,0,1,0,1,0,1], neg: [0,0,0], quant: [7.0, 73.0], summary: "Networking event. Met interesting founders" },
            12: { pos: [1,1,1,1,0,0,0,0], neg: [1,0,0], quant: [7.2, 73.1], summary: "Quiet day. Got lost on reddit again" },
            13: { pos: [1,0,1,1,1,1,0,0], neg: [0,0,0], quant: [7.5, 72.9], summary: "Skipped reading for podcast instead" },
            14: { pos: [0,1,0,1,0,0,1,1], neg: [0,1,0], quant: [7.0, 73.0], summary: "Takeout night. Worked on blog post" },
            15: { pos: [1,1,1,1,0,1,0,0], neg: [0,0,0], quant: [7.8, 72.8], summary: "Productive Wednesday. Clear headspace" },
            16: { pos: [1,1,1,0,1,0,0,1], neg: [0,0,0], quant: [6.8, 72.9], summary: "Morning meditation unlocked something" },
            17: { pos: [1,1,0,1,0,1,0,0], neg: [1,0,0], quant: [7.2, 72.7], summary: "Distracted day. Need to block socials" },
            18: { pos: [0,1,1,1,0,0,1,0], neg: [0,0,0], quant: [7.5, 72.6], summary: "Gym PR. Feeling strong lately" },
            19: { pos: [1,1,1,1,1,1,0,1], neg: [0,0,0], quant: [8.0, 72.5], summary: "Almost perfect day. This is the way" },
            20: { pos: [1,1,0,1,0,0,0,0], neg: [0,0,0], quant: [7.0, 72.6], summary: "Coasting. Not bad, not great" },
            21: { pos: [1,1,1,0,0,1,0,1], neg: [0,1,0], quant: [6.0, 72.8], summary: "Burger and fries. Birthday celebration" },
            22: { pos: [1,0,1,1,1,0,0,0], neg: [0,0,0], quant: [7.5, 72.5], summary: "No reading but solid meditation" },
            23: { pos: [1,1,1,1,0,1,1,0], neg: [0,0,0], quant: [7.2, 72.4], summary: "Shipped blog post. Feels good" },
            24: { pos: [0,1,0,1,0,0,0,1], neg: [1,0,0], quant: [7.8, 72.3], summary: "Low energy. Scrolled too much" },
            25: { pos: [1,1,1,1,1,1,0,0], neg: [0,0,0], quant: [8.0, 72.2], summary: "Great Saturday. Long run, good food" },
            26: { pos: [1,1,1,1,0,0,0,1], neg: [0,0,0], quant: [7.5, 72.1], summary: "Caught up with college friend" },
            27: { pos: [1,1,0,1,0,1,0,0], neg: [0,0,0], quant: [7.0, null], summary: "..." },
            28: { pos: [1,0,1,0,0,0,0,0], neg: [0,0,1], quant: [5.5, null], summary: "..." },
            29: { pos: [], neg: [], quant: [null, null], summary: "" },
            30: { pos: [], neg: [], quant: [null, null], summary: "" },
            31: { pos: [], neg: [], quant: [null, null], summary: "" }
        };

        const daysIn = 31;
        const dayOfWeek = d => new Date(2025, 0, d).getDay();

        function calcScore(dd) {
            if (!dd.pos?.length && !dd.neg?.length) return null;
            let s = 0;
            if (dd.pos) s += dd.pos.filter(Boolean).length;
            if (dd.neg) s -= dd.neg.filter(Boolean).length;
            return s;
        }

        function render() {
            // Moments
            let momentsHtml = '';
            for (let d = 1; d <= daysIn; d++) {
                const dd = DEMO_DATA[d] || {};
                const isSun = dayOfWeek(d) === 0;
                momentsHtml += `<div class="moment-row${isSun ? ' sunday' : ''}">
                    <span class="moment-day">${d}</span>
                    <input class="moment-input" type="text" value="${dd.summary || ''}" readonly>
                </div>`;
            }
            document.getElementById('momentsList').innerHTML = momentsHtml;

            // Grid
            let gridHtml = '<thead><tr><th class="day-col">#</th>';
            CONFIG.quantitative.forEach(q => {
                gridHtml += `<th class="quant-col">${q.name}</th>`;
            });
            CONFIG.habits.positive.forEach(h => {
                gridHtml += `<th>${h}</th>`;
            });
            CONFIG.habits.avoid.forEach(h => {
                gridHtml += `<th class="avoid-col">${h}</th>`;
            });
            gridHtml += '<th class="score-col">Pts</th></tr></thead><tbody>';

            for (let d = 1; d <= daysIn; d++) {
                const dd = DEMO_DATA[d] || { pos: [], neg: [], quant: [] };
                const isSun = dayOfWeek(d) === 0;
                
                gridHtml += `<tr class="${isSun ? 'sunday-row' : ''}">`;
                gridHtml += `<td class="day-cell">${d}</td>`;

                CONFIG.quantitative.forEach((q, i) => {
                    const v = dd.quant && dd.quant[i] !== null ? dd.quant[i] : '';
                    gridHtml += `<td class="quant-cell">${v}</td>`;
                });

                CONFIG.habits.positive.forEach((h, i) => {
                    const chk = dd.pos && dd.pos[i];
                    gridHtml += `<td class="positive${chk ? ' checked' : ''}">${chk ? '×' : ''}</td>`;
                });

                CONFIG.habits.avoid.forEach((h, i) => {
                    const chk = dd.neg && dd.neg[i];
                    gridHtml += `<td class="avoid${chk ? ' checked' : ''}">${chk ? '×' : ''}</td>`;
                });

                const score = calcScore(dd);
                gridHtml += `<td class="score-cell">${score !== null ? score : ''}</td>`;
                gridHtml += '</tr>';
            }
            gridHtml += '</tbody>';
            document.getElementById('habitGrid').innerHTML = gridHtml;

            renderGraph();
        }

        function renderGraph() {
            const min = -5, max = 12, range = max - min;

            let html = '';
            const scores = [];

            for (let d = 1; d <= daysIn; d++) {
                const dd = DEMO_DATA[d] || {};
                const score = calcScore(dd);
                scores.push({ d, score });
                const isSun = dayOfWeek(d) === 0;

                html += `<div class="graph-row${isSun ? ' sunday' : ''}"><div class="graph-dots">`;
                if (score !== null) {
                    const clamped = Math.max(min, Math.min(max, score));
                    const pct = ((clamped - min) / range) * 100;
                    html += `<div class="graph-dot" style="left:calc(${pct}% - 3px)"></div>`;
                }
                html += '</div></div>';
            }

            html += '<div class="graph-canvas-wrap"><canvas id="graphCanvas" class="graph-canvas"></canvas></div>';
            document.getElementById('graphContainer').innerHTML = html;

            setTimeout(() => {
                const canvas = document.getElementById('graphCanvas');
                if (!canvas) return;
                const wrap = canvas.parentElement;
                canvas.width = wrap.offsetWidth * 2;
                canvas.height = wrap.offsetHeight * 2;
                const ctx = canvas.getContext('2d');
                ctx.scale(2, 2);

                const w = wrap.offsetWidth;
                const h = wrap.offsetHeight;
                const rowH = h / daysIn;

                ctx.strokeStyle = '#5c5347';
                ctx.lineWidth = 1.5;
                ctx.beginPath();

                // Read dot positions from the DOM so the canvas lines match
                // the visible dot centers exactly.
                let last = null;
                const container = wrap.parentElement; // .graph-container
                const rows = container.querySelectorAll('.graph-row');
                const wrapRect = wrap.getBoundingClientRect();

                for (let i = 0; i < rows.length; i++) {
                    const row = rows[i];
                    const dot = row.querySelector('.graph-dot');
                    if (!dot) continue;
                    const dotRect = dot.getBoundingClientRect();
                    const x = dotRect.left - wrapRect.left + dotRect.width / 2;
                    const y = dotRect.top - wrapRect.top + dotRect.height / 2;
                    if (last) {
                        ctx.moveTo(last.x, last.y);
                        ctx.lineTo(x, y);
                    }
                    last = { x, y };
                }
                ctx.stroke();
            }, 10);
        }

        document.addEventListener('DOMContentLoaded', render);
        window.addEventListener('resize', renderGraph);
    </script>
</body>
</html>
